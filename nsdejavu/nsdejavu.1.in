.\" -*- nroff -*-
.\"
.\" Copyright (c) 2001 Leon Bottou, Yann Le Cun, Patrick Haffner,
.\"                    AT&T Corp., and Lizardtech, Inc.
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual. Otherwise check the web site
.\" of the Free Software Foundation at http://www.fsf.org.
.TH NSDEJAVU 1 "1/4/2006" "DjView-4" "DjView-4"
.de SS
.SH \\0\\0\\0\\$*
..
.SH NAME
nsdejavu \- DjVu browser plugin

.SH SYNOPSIS
.B LIBDIR/netscape/plugins/NSDEJAVUSO

.SH DESCRIPTION
The shared library
.B NSDEJAVUSO
uses the Netscape browser plugin
.SM API
to display DjVu images in
in a number of popular web browsers.
Different web browsers provide various level
of support for Netscape plugins.
Please check section "Browser Compatibility"
for instructions on how to enable the
DjVu browser plugin.
Both the standalone viewer
.B djview4
and the DjVu browser plugin
.B NSDEJAVUSO
offer similar features.
The DjVu browser plugin in fact is wrapper that invokes the standalone viewer
program in remote control mode.  This man pages describes those features
that are specific to the browser plugin.  Additional information can
be found in the
.BR djview4 (1)
and
.BR djview3 (1)
man pages.

.SH FINDING DJVIEW
The shared library 
.B NSDEJAVUSO 
first searches a program named
.BR djview ,
.BR djview4 ,
or, when everything else fails,
.BR djview3 .
Each program is searched in a rather long list 
of plausible directories.  
It is always possible to override this search strategy
by making the environment variable
.B NPX_DJVIEW
point to the desired 
.B djview
executable.

.SH MIME TYPES AND EXTENSIONS
Typing the
.SM URL
of a recognized DjVu document in your web browser
should automatically invoke the DjVu browser plugin.
Each browser uses different methods to determine that a particular
.SM URL
is in fact a DjVu document.
Web server normally provide a
.SM MIME
type to web browsers.
The official MIME type for DjVu documents is
.BR image/vnd.djvu .
For compatibility with ancient versions of the
DjVu viewer, it is common to use instead the
experimental MIME type
.B image/x-djvu
or
.BR image/x.djvu .
Web servers should be configured to send the proper
MIME type for DjVu documents. See the DjVu tutorial
for more information (
.B http://www.djvuzone.org/support/tutorial
).
Most web browsers also recognize files ending with
.B .djvu
or
.B .djv
as DjVu files.

An easy way to check if an http server is giving an appropriate
content-type is to invoke the following command with a URL
corresponding to an actual DjVu file on the server.
.IP "" 2
.BI "curl -u " URL " | grep Content-Type"
.PP
The result should be one of the following, preferably the first.
.IP "" 2
.B Content-Type: image/vnd.djvu
.br
.B Content-Type: image/x.djvu
.br
.B Content-Type: image/x-djvu
.PP
Any other MIME type indicates a server misconfiguration.

.SH CGI-STYLE FLAGS
The behavior of the DjVu browser plugin can be specified by
by augmenting the
.SM URL
using a syntax similar to that used by the
.SM CGI
programs.
This syntax is described by the following template:
.IP "" 3
.BI "http://.../file.djvu?djvuopts&" "keyword=value" "&" "keyword=value" "&" "..."
.PP
The DjVu browser plugin only recognizes keywords that appear
after the word
.BR djvuopts .
The recognized keywords are listed in the man page
.BR djview4 (1).
The most common keywords are:
.TP
.BI page= pagenum_or_pagename
Specify the initial page to be displayed.
Page numbers are numbered from 1.
.TP
.BI zoom= zoomfactor
Specify the initial zoom factor.
Legal values for
.I zoomfactor
are shown in the below:
.br
.TS
center,box;
lfI l
lfB l
lfB l
lfB l
lfB l
.
number	Magnification factor in range 10% to 999%.
one2one	Select the "one-to-one" mode.
width	Select the "fit width" mode.
page	Select the "fit page" mode.
stretch	Stretch the image to the plugin window size.
.TE
.PP
.TP
.BI cache=(yes|no)
Enable or disable the caching of fully decoded pages of the document.
Caching is on by default.  Caching of documents whose
.SM URL
does not contain extension
.BE .djvu " or " .djv
is off by default.

.SH EMBEDDING DJVU IMAGES
A good way to integrate DjVu content on your web page is to use the
.SM EMBED
directive of the
.SM HTML
language.
An advantage of this method is that it will work even if your web server
does not support the DjVu
.SM MIME
type.
Furthermore, the
.SM CGI
style flags can be directly used as attributes of the
.SM EMBED
tag.
Here is an example:
.IP "" 3
.B "<embed src=""myfile.djvu"" type=""image/x-djvu"""
.br
.B "\0\0\0\0\0\0\0\0\0 width=""100%"" height=""100%"""
.br
.B "\0\0\0\0\0\0\0\0\0 page=iii zoom=stretch >
.B </embed>
.PP

.SH CREDITS
This program was written by Andrei Erofeev <andrew_erofeev@yahoo.com>
and was then improved by Bill Riemers <docbill@sourceforge.net> and
L\('eon Bottou <leonb@users.sourceforge.net>.

.SH SEE ALSO
.BR djvu (1),
.BR ddjvu (1),
.BR djview4 (1)
.BR djview3 (1)
